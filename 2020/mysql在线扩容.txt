mycat，原来有2台master mysql（还有2台salve），现在要扩容到4台master；
假设分库键key按hash分库，原来老路由规则：key%2 == 0，路由到mysql0，key%2 == 1路由到mysql1；
现在新路由规则：key%4 == 0，路由到mysql0，key%4 == 1路由到mysql1，key%4 == 2路由到mysql2，key%4 == 3路由到mysql3；
1、将新的两台mysql主机挂载到原来2台master下，作为salve进行全量复制，mysql2挂载到mysql0下，mysql3挂载到mysql1下；
2、等到接近复制完成（假设原来库一直在写入，因此无法做到完全复制），在mycat中block住key%4==2、key%4==3路由的写入（即阻塞应该路由到新库的写入）；
3、保证新mysql2、mysql3复制到了block的时间点后，停止复制，使其变为可写数据库；
4、修改mycat到新的路由规则，停止block，使key%4==2、key%4==3分别写到新的库mysql2、mysql3中；
5、对mysql中不符合新路由规则的旧数据进行清理；



如果是同一台mysql中的一张表table，要分成两张表table1、table2；
1、新建增量表t3：包含主键、table主键、更新时间3个列即可；
3、在table上新建触发器，对所有的insert、update、delete时，把主键写入增量表t3；
4、对原始表的数据读取，按规则写入table1、table2，记录迁移时间；这个步骤，也可以对原始表做一个备份后读取，记录迁移时间；这个过程需要保证记录增量的操作已经在进行。
5、待全量迁移完毕后，删除增量表中开始时间之前的数据。开始读取后面有变化的主键，读取到结果的根据规则写入新表，读取不到（原表中已经delete）删除新表中的相应的数据，一直进行着，增量表中，
  迁移过程注意日志保存和相应的清理；
6、待增量追评或是增量表中只有少量的数据的情况，同时确保是业务低峰情况下，对迁移表下发block写入动作，更新规则，推送给DBProxy，原始对该表的连接全部干掉。同时确认增量表已经迁移完毕。
7、应用新规则，放开写入动作，新的流量下发到新表中。
